<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: InteractionNetwork
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "InteractionNetwork";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (I)</a> &raquo;
    
    
    <span class="title">InteractionNetwork</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: InteractionNetwork
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">InteractionNetwork</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>InteractionNetwork.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-InteractionNetwork">InteractionNetwork</h2>

<p>This is a complex representation of an interaction network between a list
of AGI locus codes, with KEGG pathways and GO biological processes
annotations.</p>

<h2 id="label-Summary">Summary</h2>

<p>This can be used to check the interactions within a list of genes, mainly
between Arabidopsis since it uses BAR UToronto database.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="num-classvariable" class="">@@num =
          <div class="docstring">
  <div class="discussion">
    
<p>to count the number of networks</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
        <dt id="all_interactions-classvariable" class="">@@all_interactions =
          <div class="docstring">
  <div class="discussion">
    
<p>Array with all the objects of the class</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="genes-classvariable" class="">@@genes =
          <div class="docstring">
  <div class="discussion">
    
<p>Array with all the genes read from the input file</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#go_terms-instance_method" title="#go_terms (instance method)">#<strong>go_terms</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get/Set the GO biological process annotations of the network.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#kegg_path-instance_method" title="#kegg_path (instance method)">#<strong>kegg_path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get/Set the KEGG pathways annotations of the network.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#members-instance_method" title="#members (instance method)">#<strong>members</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get/Set the members of the network.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#network-instance_method" title="#network (instance method)">#<strong>network</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get/Set the number of the network.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch-class_method" title="fetch (class method)">.<strong>fetch</strong>(url, headers = {accept: &quot;*/*&quot;}, user = &quot;&quot;, pass = &quot;&quot;)  &#x21d2; String, Error </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Handles a RestClient request.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_agi-class_method" title="get_agi (class method)">.<strong>get_agi</strong>(file)  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read the gene codes from a file and add them to an Array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_all-class_method" title="get_all (class method)">.<strong>get_all</strong>  &#x21d2; Array&lt;InteractionNetwork&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get all the objects of the class saved in the class variable (see
#initialize).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load-class_method" title="load (class method)">.<strong>load</strong>  &#x21d2; InteractionNetwork </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates the InteractionNetwork objects running the initialize (see
#initialize) method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#num-class_method" title="num (class method)">.<strong>num</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the number of InteractionNetwork objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_interactors-class_method" title="search_interactors (class method)">.<strong>search_interactors</strong>(cutv = 0.485, genes = @@genes)  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Search for the protein-protein interactions between the genes in the Array
in the BAR UToronto database using the Psicquic webservice.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#annotate_GO-instance_method" title="#annotate_GO (instance method)">#<strong>annotate_GO</strong>(ids, db = &quot;uniprot&quot;, field = &quot;dr&quot;)  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the GO Biological Process annotations for an Array of gene codes using
TOGO REST API.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#annotate_kegg-instance_method" title="#annotate_kegg (instance method)">#<strong>annotate_kegg</strong>(ids, db = &quot;genes&quot;, field = &quot;pathways&quot;)  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the KEGG pathways annotations for an Array of gene codes using TOGO
REST API.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(params = {})  &#x21d2; InteractionNetwork </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>An instance of InteractionNetwork.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(params = {})  &#x21d2; <tt><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an instance of InteractionNetwork.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>network</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the number of the network as an Integer</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>members</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>list [Array&lt;String&gt;] the members of the network as a List of Strings</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kegg_path</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>list [Array&lt;String&gt;] the KEGG pathways annotations of the members as
a List of Strings</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>go_terms</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>list [Array&lt;String&gt;] the GO Biological Process annotations of the
members as a List of Strings</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@network</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:network</span><span class='comma'>,</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='ivar'>@members</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:members</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NA</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@kegg_path</span> <span class='op'>=</span> <span class='id identifier rubyid_annotate_kegg'>annotate_kegg</span><span class='lparen'>(</span><span class='id identifier rubyid_ids'>ids</span><span class='op'>=</span><span class='ivar'>@members</span><span class='rparen'>)</span> <span class='comment'>#get KEGG pathways annotation of all the members in a network
</span>  <span class='ivar'>@go_terms</span> <span class='op'>=</span> <span class='id identifier rubyid_annotate_GO'>annotate_GO</span><span class='lparen'>(</span><span class='id identifier rubyid_ids'>ids</span><span class='op'>=</span><span class='ivar'>@members</span><span class='rparen'>)</span> <span class='comment'>#get GO biological processes annotation of all the members in a network
</span>  <span class='cvar'>@@num</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='comment'>#every time a network object is initialized count it
</span>  <span class='cvar'>@@all_interactions</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span> <span class='comment'>#add all the objects to this list
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="go_terms=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="go_terms-instance_method">
  
    #<strong>go_terms</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get/Set the GO biological process annotations of the network</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_go_terms'>go_terms</span>
  <span class='ivar'>@go_terms</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="kegg_path=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="kegg_path-instance_method">
  
    #<strong>kegg_path</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get/Set the KEGG pathways annotations of the network</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_kegg_path'>kegg_path</span>
  <span class='ivar'>@kegg_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="members=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="members-instance_method">
  
    #<strong>members</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get/Set the members of the network</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_members'>members</span>
  <span class='ivar'>@members</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="network=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="network-instance_method">
  
    #<strong>network</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get/Set the number of the network</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the network number</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_network'>network</span>
  <span class='ivar'>@network</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="fetch-class_method">
  
    .<strong>fetch</strong>(url, headers = {accept: &quot;*/*&quot;}, user = &quot;&quot;, pass = &quot;&quot;)  &#x21d2; <tt>String</tt>, <tt>Error</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Handles a RestClient request</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the URL adress</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{accept: &quot;*/*&quot;}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>for content-type negotiation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>username for private URLs</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pass</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>password for private URLs</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Error</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the resulting page or exception</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 69</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>accept:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*/*</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_pass'>pass</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'>#class method to retrieve web data avoiding possible crashes
</span>  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='const'>RestClient</span><span class='op'>::</span><span class='const'>Request</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='lbrace'>{</span>
    <span class='label'>method:</span> <span class='symbol'>:get</span><span class='comma'>,</span>
    <span class='label'>url:</span> <span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span>
    <span class='label'>user:</span> <span class='id identifier rubyid_user'>user</span><span class='comma'>,</span>
    <span class='label'>password:</span> <span class='id identifier rubyid_pass'>pass</span><span class='comma'>,</span>
    <span class='label'>headers:</span> <span class='id identifier rubyid_headers'>headers</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_response'>response</span>
  
  <span class='kw'>rescue</span> <span class='const'>RestClient</span><span class='op'>::</span><span class='const'>ExceptionWithResponse</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_response'>response</span>  <span class='comment'># now we are returning &#39;False&#39;, and we will check that with an \&quot;if\&quot; statement in our main code
</span>  <span class='kw'>rescue</span> <span class='const'>RestClient</span><span class='op'>::</span><span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_response'>response</span>  <span class='comment'># now we are returning &#39;False&#39;, and we will check that with an \&quot;if\&quot; statement in our main code
</span>  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_response'>response</span>  <span class='comment'># now we are returning &#39;False&#39;, and we will check that with an \&quot;if\&quot; statement in our main code
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_agi-class_method">
  
    .<strong>get_agi</strong>(file)  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read the gene codes from a file and add them to an Array</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>path to the input file</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an Array containing the gene codes from the file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99
100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 97</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_agi'>get_agi</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span> <span class='comment'>#class method to retrieve gene codes from a file and add them to class variable
</span>  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_code'>code</span><span class='op'>|</span>
    <span class='cvar'>@@genes</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
  <span class='kw'>end</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_all-class_method">
  
    .<strong>get_all</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get all the objects of the class saved in the class variable (see
#initialize)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an Array with all the InteractionNetwork instances</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 234</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_all'>get_all</span> <span class='comment'># get the list with all the objects
</span>  <span class='kw'>return</span> <span class='cvar'>@@all_interactions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load-class_method">
  
    .<strong>load</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates the InteractionNetwork objects running the initialize (see
#initialize) method</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an instance of InteractionNetwork</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 215</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span> 
  <span class='id identifier rubyid_count'>count</span><span class='op'>=</span><span class='int'>0</span> <span class='comment'>#for the network number
</span>  <span class='cvar'>@@interacting</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span> <span class='comment'>#interacting class variable is a hash
</span>    <span class='id identifier rubyid_ids'>ids</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_count'>count</span><span class='op'>+=</span><span class='int'>1</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>2</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
        <span class='id identifier rubyid_ids'>ids</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_v'>v</span>  
      <span class='kw'>end</span>
      <span class='id identifier rubyid_ids'>ids</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_key'>key</span>
      <span class='const'><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="InteractionNetwork#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='symbol'>:network</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_count'>count</span><span class='comma'>,</span> <span class='symbol'>:members</span> <span class='op'>=&gt;</span><span class='id identifier rubyid_ids'>ids</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_ids'>ids</span><span class='op'>=</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span><span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span>
      <span class='const'><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="InteractionNetwork#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='symbol'>:network</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_count'>count</span><span class='comma'>,</span> <span class='symbol'>:members</span> <span class='op'>=&gt;</span><span class='id identifier rubyid_ids'>ids</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="num-class_method">
  
    .<strong>num</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the number of InteractionNetwork objects</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the number of objects in the class</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 106</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_num'>num</span> <span class='comment'>#class method to get the number of networks
</span>  <span class='kw'>return</span> <span class='cvar'>@@num</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search_interactors-class_method">
  
    .<strong>search_interactors</strong>(cutv = 0.485, genes = @@genes)  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Search for the protein-protein interactions between the genes in the Array
in the BAR UToronto database using the Psicquic webservice. It searches for
direct and indirect interactions</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>cutv</span>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0.485</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>cutoff value for MIscore of the interactions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>genes</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>@@genes</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>an Array of the genes used to search</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a Hash with gene used to search as key and interactors present in the genes
Array</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 115</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_search_interactors'>search_interactors</span><span class='lparen'>(</span><span class='id identifier rubyid_cutv'>cutv</span><span class='op'>=</span><span class='float'>0.485</span><span class='comma'>,</span> <span class='id identifier rubyid_genes'>genes</span><span class='op'>=</span><span class='cvar'>@@genes</span><span class='rparen'>)</span> <span class='comment'>#class method to search the interactions of the genes from the previous file
</span>  <span class='comment'>#and save them in a class variable if MIscore is bigger than the cutoff value (cutv)
</span>  <span class='cvar'>@@interacting</span><span class='op'>=</span><span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_genes'>genes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_code'>code</span><span class='op'>|</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fetch'><span class='object_link'><a href="#fetch-class_method" title="InteractionNetwork.fetch (method)">fetch</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://bar.utoronto.ca:9090/psicquic/webservices/current/search/interactor/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_code'>code</span><span class='embexpr_end'>}</span><span class='tstring_content'>/?format=tab25</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_miscore'>miscore</span><span class='op'>=</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>i\w+-\w+:(0\.\d+)</span><span class='regexp_end'>/</span></span> <span class='comment'>#regular expression to match the score of the interaction
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span>
      <span class='id identifier rubyid_intact'>intact</span><span class='op'>=</span><span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#tab25 is a format in which each interaction is separated by newline, get list of interactions
</span>      <span class='id identifier rubyid_intact'>intact</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_int'>int</span><span class='op'>|</span> <span class='comment'>#for one interaction..
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_int'>int</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(A[Tt]\d[Gg]\d\d\d\d\d)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='comment'>#skip if there are not any AGI locus
</span>        <span class='id identifier rubyid_g1'>g1</span><span class='comma'>,</span><span class='id identifier rubyid_g2'>g2</span><span class='op'>=</span><span class='id identifier rubyid_int'>int</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(A[Tt]\d[Gg]\d\d\d\d\d)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='comment'>#save the locus of the two interactors
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='op'>||</span><span class='id identifier rubyid_g2'>g2</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='comment'>#skip if it didn&#39;t find a locus for one interactor
</span>        <span class='id identifier rubyid_g1'>g1</span><span class='op'>=</span><span class='id identifier rubyid_g1'>g1</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='comment'>#scan returns a list, get the element
</span>        <span class='id identifier rubyid_g2'>g2</span><span class='op'>=</span><span class='id identifier rubyid_g2'>g2</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='op'>==</span><span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='kw'>and</span> <span class='id identifier rubyid_g2'>g2</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>!=</span> <span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='comment'>#get the interactor not the gene we used to search
</span>          <span class='id identifier rubyid_g1'>g1</span><span class='op'>=</span><span class='id identifier rubyid_g2'>g2</span>
        <span class='kw'>end</span>
        
        <span class='id identifier rubyid_score'>score</span><span class='op'>=</span><span class='id identifier rubyid_int'>int</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_miscore'>miscore</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='comment'>#get the score of the interaction and transform it to float (from string)
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_score'>score</span><span class='op'>&lt;</span><span class='id identifier rubyid_cutv'>cutv</span> <span class='comment'>#skip if the score is less than the cutoff value set
</span>        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='comment'>#skip if the interactor is same locus as the one used to search
</span>        <span class='kw'>if</span> <span class='cvar'>@@genes</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span> <span class='comment'>#if the interactor is on the list of genes
</span>           <span class='cvar'>@@interacting</span><span class='lbracket'>[</span><span class='id identifier rubyid_code'>code</span><span class='rbracket'>]</span><span class='op'>=</span><span class='id identifier rubyid_g1'>g1</span> <span class='comment'>#save it in this hash
</span>        <span class='kw'>else</span> <span class='comment'>#if the interactor is not on the list of genes
</span>          <span class='id identifier rubyid_g0'>g0</span><span class='op'>=</span><span class='id identifier rubyid_g1'>g1</span> <span class='comment'>#save this interactor in a different variable and search for it&#39;s interactors
</span>          <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fetch'><span class='object_link'><a href="#fetch-class_method" title="InteractionNetwork.fetch (method)">fetch</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://bar.utoronto.ca:9090/psicquic/webservices/current/search/interactor/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_g0'>g0</span><span class='embexpr_end'>}</span><span class='tstring_content'>/?format=tab25</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span>
            <span class='id identifier rubyid_intact2'>intact2</span><span class='op'>=</span><span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#explained above
</span>            <span class='id identifier rubyid_intact2'>intact2</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_int2'>int2</span><span class='op'>|</span>
              <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_int2'>int2</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(A[Tt]\d[Gg]\d\d\d\d\d)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
              <span class='id identifier rubyid_g1'>g1</span><span class='comma'>,</span><span class='id identifier rubyid_g2'>g2</span><span class='op'>=</span><span class='id identifier rubyid_int2'>int2</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(A[Tt]\d[Gg]\d\d\d\d\d)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
              <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='op'>||</span><span class='id identifier rubyid_g2'>g2</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='comment'>#same as before
</span>              <span class='id identifier rubyid_g1'>g1</span><span class='op'>=</span><span class='id identifier rubyid_g1'>g1</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
              <span class='id identifier rubyid_g2'>g2</span><span class='op'>=</span><span class='id identifier rubyid_g2'>g2</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
              <span class='kw'>if</span> <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='op'>==</span><span class='id identifier rubyid_g0'>g0</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='comment'>#get the interactor not the gene used to search
</span>                <span class='id identifier rubyid_g1'>g1</span><span class='op'>=</span><span class='id identifier rubyid_g2'>g2</span>
              <span class='kw'>end</span>
              <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='op'>==</span><span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='comment'>#avoid infinite loops
</span>              <span class='id identifier rubyid_score'>score</span><span class='op'>=</span><span class='id identifier rubyid_int'>int</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_miscore'>miscore</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
          
              <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_score'>score</span><span class='op'>&lt;</span><span class='id identifier rubyid_cutv'>cutv</span>
              <span class='kw'>if</span> <span class='cvar'>@@genes</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span>
                <span class='kw'>if</span> <span class='op'>!</span><span class='cvar'>@@interacting</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span> <span class='comment'>#(does not include) if no other interactions have been found for this locus before to avoid over-writing interactions
</span>                    <span class='cvar'>@@interacting</span><span class='lbracket'>[</span><span class='id identifier rubyid_code'>code</span><span class='rbracket'>]</span><span class='op'>=</span><span class='lbracket'>[</span><span class='id identifier rubyid_g0'>g0</span><span class='comma'>,</span><span class='id identifier rubyid_g1'>g1</span><span class='rbracket'>]</span> <span class='comment'>#save the first locus used to search, the intermediary gene (g0) and another locus found on the list
</span>                <span class='kw'>end</span>
              <span class='kw'>end</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>  
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="annotate_GO-instance_method">
  
    #<strong>annotate_GO</strong>(ids, db = &quot;uniprot&quot;, field = &quot;dr&quot;)  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the GO Biological Process annotations for an Array of gene codes using
TOGO REST API</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ids</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array with the gene codes to annotate</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>db</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;uniprot&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>name of the database</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>field</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;dr&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>name of the field of the given database</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array with annotations</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 194</span>

<span class='kw'>def</span> <span class='id identifier rubyid_annotate_GO'>annotate_GO</span><span class='lparen'>(</span><span class='id identifier rubyid_ids'>ids</span><span class='comma'>,</span><span class='id identifier rubyid_db'>db</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>uniprot</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_field'>field</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dr</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#annotate with GO from uniprot cross refferences
</span>  <span class='id identifier rubyid_annotations'>annotations</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span>
    <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fetch'><span class='object_link'><a href="#fetch-class_method" title="InteractionNetwork.fetch (method)">fetch</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://togows.org/entry/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db'>db</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_field'>field</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_resp'>resp</span>
      <span class='id identifier rubyid_res'>res</span><span class='op'>=</span><span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GO</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_term'>term</span><span class='op'>|</span> <span class='comment'>#dr format is hashes --&gt; list of lists GO lists have three elements: GO-id,GOterm(class:definition)
</span>        <span class='kw'>if</span> <span class='id identifier rubyid_term'>term</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>=~</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>P:</span><span class='regexp_end'>/</span></span> <span class='comment'>#P=biological processes class
</span>          <span class='id identifier rubyid_goid'>goid</span><span class='op'>=</span><span class='id identifier rubyid_term'>term</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_goterm'>goterm</span><span class='op'>=</span><span class='id identifier rubyid_term'>term</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>:(.+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_annotations'>annotations</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_goid'>goid</span><span class='comma'>,</span><span class='id identifier rubyid_goterm'>goterm</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_annotations'>annotations</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span> <span class='comment'># some GO terms are repeated in this database
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>      
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="annotate_kegg-instance_method">
  
    #<strong>annotate_kegg</strong>(ids, db = &quot;genes&quot;, field = &quot;pathways&quot;)  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get the KEGG pathways annotations for an Array of gene codes using TOGO
REST API</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ids</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array with the gene codes to annotate</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>db</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;genes&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>name of the database</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>field</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;pathways&quot;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>name of the field of the given database</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array with annotations</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176
177
178
179
180
181
182
183
184
185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionNetwork.rb', line 174</span>

<span class='kw'>def</span> <span class='id identifier rubyid_annotate_kegg'>annotate_kegg</span><span class='lparen'>(</span><span class='id identifier rubyid_ids'>ids</span><span class='comma'>,</span><span class='id identifier rubyid_db'>db</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>genes</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_field'>field</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pathways</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#method to annotate every member of a network with KEGG
</span>  <span class='id identifier rubyid_annotations'>annotations</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'>#list for annotations
</span>  <span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span> 
    <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="InteractionNetwork (class)">InteractionNetwork</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fetch'><span class='object_link'><a href="#fetch-class_method" title="InteractionNetwork.fetch (method)">fetch</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://togows.org/entry/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db'>db</span><span class='embexpr_end'>}</span><span class='tstring_content'>/ath:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_field'>field</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_resp'>resp</span>
      <span class='id identifier rubyid_res'>res</span><span class='op'>=</span><span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='comment'>#access the results (json format is a list)
</span>      <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_kegg_id'>kegg_id</span><span class='comma'>,</span><span class='id identifier rubyid_kegg_p'>kegg_p</span><span class='op'>|</span> <span class='comment'>#data is in hash format, get
</span>          <span class='id identifier rubyid_annotations'>annotations</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_kegg_id'>kegg_id</span><span class='comma'>,</span><span class='id identifier rubyid_kegg_p'>kegg_p</span><span class='rbracket'>]</span> <span class='comment'>#save the annotations of each locus in the list
</span>      <span class='kw'>end</span>
    <span class='kw'>end</span>
    
    <span class='kw'>return</span> <span class='id identifier rubyid_annotations'>annotations</span> <span class='comment'>#return the list of annotations for the network
</span>  <span class='kw'>end</span>  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Nov 10 16:59:44 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>